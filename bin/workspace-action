#!/usr/bin/env bash
CURRENT_WORKSPACE="$(hyprctl activeworkspace -j | jq -r ".id")"
DISPATHCER="$1"

shift ## The target is now in $1, not $2

if [[ -z "${DISPATHCER}" || "${DISPATHCER}" == "--help" || "${DISPATHCER}" == "-h" || -z "$1" ]]; then
	echo "Usage: $0 <DISPATHCER> <target>"
	exit 1
fi
if [[ "$1" == *"+"* || "$1" == *"-"* ]]; then ## Is this something like r+1 or -1?
	hyprctl dispatch "${DISPATHCER}" "$1"        ## $1 = workspace id since we shifted earlier.
elif [[ "$1" =~ ^[0-9]+$ ]]; then             ## Is this just a number?
	TARGET_WORKSPACE=$(((("$CURRENT_WORKSPACE" - 1) / 10) * 10 + $1))
	hyprctl dispatch "${DISPATHCER}" "${TARGET_WORKSPACE}"
else
	hyprctl dispatch "${DISPATHCER}" "$1" ## In case the target in a string, required for special workspaces.
	exit 1
fi
